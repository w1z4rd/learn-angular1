(function() {
 angular.module('NarrowItDownApp', [])
   .controller('NarrowItDownController', NarrowItDownController)
   .service('MenuItemsService', MenuItemsService)
   .directive('itemsListDirective', ItemsListDirective)
   .constant('ApiBasePath', "https://davids-restaurant.herokuapp.com");

 NarrowItDownController.$inject = ['MenuItemsService', '$filter'];
 function NarrowItDownController(MenuItemsService, $filter) {
   var ctrl = this;

   ctrl.list = [];
   ctrl.searchTerm = "";

   ctrl.narrowItDown = function() {
    var promise =  MenuItemsService.getItems();
     promise.then(function (response) {
        ctrl.list = $filter('filter')(response.data, searchTerm)
     })
     .catch(function (error) {
       console.log(error);
     });
   }
 };

 MenuItemsService.$inject = ['$http', 'ApiBasePath']
 function MenuItemsService($http, ApiBasePath) {
   var service = this;

   service.getItems = function(() {
     const input = searchTerm || "";

     if (input.length > 0) {
       service.list = getFilteredItems(input);
     } else {
       service.list = getAllItems();
     }
     console.log(service.list);
   };

   function getFilteredItems(input) {
   };

   function getAllItems() {
     var promise = $http({
       method: "GET",
       url: (ApiBasePath + "/menu_items.json")
     })
     return promise;
   };
 };

 function ItemsListDirective() {
 };

})();
